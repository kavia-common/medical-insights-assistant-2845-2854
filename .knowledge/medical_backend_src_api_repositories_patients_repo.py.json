{"is_source_file": true, "format": "Python", "description": "This file defines a Python class PatientsRepository that manages an in-memory collection of Patient objects, providing CRUD operations such as create, get, list, update, and delete. It also sets up a singleton instance of this repository for application-wide use.", "external_files": ["..models.schemas"], "external_methods": ["datetime.utcnow", "uuid.uuid4"], "published": ["patients_repo"], "classes": [{"name": "PatientsRepository", "description": "A simple in-memory repository class for managing Patient records, intended to be replaceable with a database backend."}], "methods": [{"name": "Patient create(self, data: PatientCreate)", "description": "Creates a new Patient record with a unique ID and timestamps, then stores it in internal dictionary.", "scope": "PatientsRepository", "scopeKind": "class"}, {"name": "Optional[Patient] get(self, pid: str)", "description": "Retrieves a Patient object by its ID.", "scope": "PatientsRepository", "scopeKind": "class"}, {"name": "List[Patient] list(self)", "description": "Returns a list of all stored Patient objects.", "scope": "PatientsRepository", "scopeKind": "class"}, {"name": "Optional[Patient] update(self, pid: str, changes: PatientUpdate)", "description": "Updates an existing Patient record with new data and refreshes the 'updated_at' timestamp.", "scope": "PatientsRepository", "scopeKind": "class"}, {"name": "bool delete(self, pid: str)", "description": "Deletes a Patient record by ID.", "scope": "PatientsRepository", "scopeKind": "class"}, {"name": "None __init__(self)", "scope": "PatientsRepository", "scopeKind": "class", "description": "unavailable"}], "calls": ["datetime.utcnow", "uuid.uuid4", "patient.model_fields_set", "patient.model_dump", "changes.model_dump", "item.model_copy", "log.info"], "search-terms": ["Patient", "PatientsRepository", "patients_repo", "in-memory repository", "CRUD operations"], "state": 2, "file_id": 9, "knowledge_revision": 20, "git_revision": "", "ctags": [{"_type": "tag", "name": "PatientsRepository", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/repositories/patients_repo.py", "pattern": "/^class PatientsRepository:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/repositories/patients_repo.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "PatientsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/repositories/patients_repo.py", "pattern": "/^    def create(self, data: PatientCreate) -> Patient:$/", "language": "Python", "typeref": "typename:Patient", "kind": "member", "signature": "(self, data: PatientCreate)", "scope": "PatientsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/repositories/patients_repo.py", "pattern": "/^    def delete(self, pid: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, pid: str)", "scope": "PatientsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/repositories/patients_repo.py", "pattern": "/^    def get(self, pid: str) -> Optional[Patient]:$/", "language": "Python", "typeref": "typename:Optional[Patient]", "kind": "member", "signature": "(self, pid: str)", "scope": "PatientsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/repositories/patients_repo.py", "pattern": "/^    def list(self) -> List[Patient]:$/", "language": "Python", "typeref": "typename:List[Patient]", "kind": "member", "signature": "(self)", "scope": "PatientsRepository", "scopeKind": "class"}, {"_type": "tag", "name": "log", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/repositories/patients_repo.py", "pattern": "/^log = logging.getLogger(\"app.repo.patients\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "patients_repo", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/repositories/patients_repo.py", "pattern": "/^patients_repo = PatientsRepository()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/repositories/patients_repo.py", "pattern": "/^    def update(self, pid: str, changes: PatientUpdate) -> Optional[Patient]:$/", "language": "Python", "typeref": "typename:Optional[Patient]", "kind": "member", "signature": "(self, pid: str, changes: PatientUpdate)", "scope": "PatientsRepository", "scopeKind": "class"}], "hash": "b4a7759ce938201f685d7609dbfdfe26", "format-version": 4, "code-base-name": "medical_backend", "filename": "medical_backend/src/api/repositories/patients_repo.py", "fields": [{"name": "log = logging.getLogger(\"app.repo.patients\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "patients_repo = PatientsRepository()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"20": ""}]}