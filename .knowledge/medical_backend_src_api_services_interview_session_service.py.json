{"is_source_file": true, "format": "Python", "description": "This file defines classes and a service for managing in-memory interview sessions between a patient and an agent, including session lifecycle management, transcript handling, and interaction with external modules for question generation and file storage.", "external_files": ["../services/agents", "../repositories/interview_files_repo"], "external_methods": ["patient_interview_agent.next_questions", "interview_files_repo.write_text"], "published": ["interview_session_service"], "classes": [{"name": "InterviewSession", "description": "Represents an individual agent-driven interview session for a patient, maintaining the transcript and session metadata."}, {"name": "InterviewSessionService", "description": "Manages multiple interview sessions in-memory, providing methods to start, submit answers, and end sessions."}], "methods": [{"name": "Dict[str,Any] start_session(self, patient_id: str, chief_complaint: Optional[str], context: Optional[Dict[str, Any]])", "description": "Initializes a new interview session or continues an existing one, returning the initial questions.", "scope": "InterviewSessionService", "scopeKind": "class"}, {"name": "Dict[str,Any] submit_answer(self, patient_id: str, answer: str)", "description": "Records a patient's answer and retrieves subsequent questions.", "scope": "InterviewSessionService", "scopeKind": "class"}, {"name": "Dict[str,Any] end_session(self, patient_id: str)", "description": "Completes the session, writes the transcript to external storage, and cleans up.", "scope": "InterviewSessionService", "scopeKind": "class"}, {"name": "__init__(self)", "scope": "InterviewSessionService", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, patient_id: str, chief_complaint: Optional[str] = None, context: Optional[Dict[str, Any]] = None)", "scope": "InterviewSession", "scopeKind": "class", "description": "unavailable"}, {"name": "None append_turn(self, role: str, content: str)", "scope": "InterviewSession", "scopeKind": "class", "description": "unavailable"}, {"name": "str to_text(self)", "scope": "InterviewSession", "scopeKind": "class", "description": "unavailable"}], "calls": ["patient_interview_agent.next_questions", "interview_files_repo.write_text"], "search-terms": ["InterviewSession", "InterviewSessionService", "patient_interview_agent", "interview_files_repo", "session management", "transcript handling", "medical interview"], "state": 2, "file_id": 23, "knowledge_revision": 71, "git_revision": "", "ctags": [{"_type": "tag", "name": "InterviewSession", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^class InterviewSession:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "InterviewSessionService", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^class InterviewSessionService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "InterviewSessionService", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^    def __init__(self, patient_id: str, chief_complaint: Optional[str] = None, context: Optional/", "language": "Python", "kind": "member", "signature": "(self, patient_id: str, chief_complaint: Optional[str] = None, context: Optional[Dict[str, Any]] = None)", "scope": "InterviewSession", "scopeKind": "class"}, {"_type": "tag", "name": "append_turn", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^    def append_turn(self, role: str, content: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, role: str, content: str)", "scope": "InterviewSession", "scopeKind": "class"}, {"_type": "tag", "name": "end_session", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^    async def end_session(self, patient_id: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, patient_id: str)", "scope": "InterviewSessionService", "scopeKind": "class"}, {"_type": "tag", "name": "interview_session_service", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^interview_session_service = InterviewSessionService()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "log", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^log = logging.getLogger(\"app.interview.session\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "start_session", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^    async def start_session(self, patient_id: str, chief_complaint: Optional[str], context: Opti/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, patient_id: str, chief_complaint: Optional[str], context: Optional[Dict[str, Any]])", "scope": "InterviewSessionService", "scopeKind": "class"}, {"_type": "tag", "name": "submit_answer", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^    async def submit_answer(self, patient_id: str, answer: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, patient_id: str, answer: str)", "scope": "InterviewSessionService", "scopeKind": "class"}, {"_type": "tag", "name": "to_text", "path": "/home/kavia/workspace/code-generation/medical-insights-assistant-2845-2854/medical_backend/src/api/services/interview_session_service.py", "pattern": "/^    def to_text(self) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self)", "scope": "InterviewSession", "scopeKind": "class"}], "hash": "d97089e833f384bb714dbb7db0c52d12", "format-version": 4, "code-base-name": "medical_backend", "filename": "medical_backend/src/api/services/interview_session_service.py", "fields": [{"name": "interview_session_service = InterviewSessionService()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "log = logging.getLogger(\"app.interview.session\")", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"71": ""}]}